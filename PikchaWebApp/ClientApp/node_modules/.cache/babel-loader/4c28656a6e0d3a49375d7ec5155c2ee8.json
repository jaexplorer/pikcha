{"ast":null,"code":"// TODO: Clean up Dispatch for consistency, link to backend\nimport setAuthToken from \"../utils/setAuthToken\";\nimport axios from \"axios\";\nimport { REGISTER_SUCCESS, REGISTER_FAIL, USER_LOADED, AUTH_ERROR, LOGIN_SUCCESS, LOGIN_FAIL, LOGGED_OUT, CLEAR_ERRORS, SET_LOADING } from \"./types\"; // LOAD USER\n\nexport const loadUser = () => {\n  if (localStorage.token) {\n    setAuthToken(localStorage.token);\n  }\n\n  return async dispatch => {\n    try {\n      dispatch(setLoading());\n      const res = await axios.get(\"http://localhost:5000/api/auth\");\n      dispatch({\n        type: USER_LOADED,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: AUTH_ERROR\n      });\n    }\n  };\n}; // REGISTER USER\n\nexport const register = formData => async dispatch => {\n  try {\n    dispatch(setLoading());\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const res = await axios.post(\"http://localhost:5000/api/users\", formData, config);\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: res.data\n    });\n    dispatch(loadUser());\n  } catch (err) {\n    dispatch({\n      type: REGISTER_FAIL,\n      payload: err.response.data.msg\n    });\n  }\n}; // LOGIN USER\n\nexport const login = formData => async dispatch => {\n  try {\n    dispatch(setLoading());\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const res = await axios.post(\"http://localhost:5000/api/auth\", formData, config);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n    dispatch(loadUser());\n  } catch (err) {\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: err.response.data.msg\n    });\n  }\n}; // LOGOUT USER\n\nexport const logout = () => {\n  return async dispatch => {\n    dispatch({\n      type: LOGGED_OUT\n    });\n  };\n}; // CLEAR ERRORS\n\nexport const clearErrors = () => {\n  return dispatch => {\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n  };\n}; // SET LOADING\n\nexport const setLoading = () => {\n  return {\n    type: SET_LOADING\n  };\n};","map":{"version":3,"sources":["/Users/AndrewSabato/Desktop/Pikcha/Repo/PikchaWebApp/ClientApp/src/actions/auth.js"],"names":["setAuthToken","axios","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGGED_OUT","CLEAR_ERRORS","SET_LOADING","loadUser","localStorage","token","dispatch","setLoading","res","get","type","payload","data","err","register","formData","config","headers","post","response","msg","login","logout","clearErrors"],"mappings":"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","sourcesContent":["// TODO: Clean up Dispatch for consistency, link to backend\nimport setAuthToken from \"../utils/setAuthToken\";\nimport axios from \"axios\";\n\nimport {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  USER_LOADED,\n  AUTH_ERROR,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGGED_OUT,\n  CLEAR_ERRORS,\n  SET_LOADING\n} from \"./types\";\n\n// LOAD USER\nexport const loadUser = () => {\n  if (localStorage.token) {\n    setAuthToken(localStorage.token);\n  }\n\n  return async dispatch => {\n    try {\n      dispatch(setLoading());\n      const res = await axios.get(\"http://localhost:5000/api/auth\");\n\n      dispatch({\n        type: USER_LOADED,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({ type: AUTH_ERROR });\n    }\n  };\n};\n\n// REGISTER USER\nexport const register = formData => async dispatch => {\n  try {\n    dispatch(setLoading());\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const res = await axios.post(\n      \"http://localhost:5000/api/users\",\n      formData,\n      config\n    );\n\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: res.data\n    });\n    dispatch(loadUser());\n  } catch (err) {\n    dispatch({\n      type: REGISTER_FAIL,\n      payload: err.response.data.msg\n    });\n  }\n};\n\n// LOGIN USER\nexport const login = formData => async dispatch => {\n  try {\n    dispatch(setLoading());\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n\n    const res = await axios.post(\n      \"http://localhost:5000/api/auth\",\n      formData,\n      config\n    );\n\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n    dispatch(loadUser());\n  } catch (err) {\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: err.response.data.msg\n    });\n  }\n};\n\n// LOGOUT USER\nexport const logout = () => {\n  return async dispatch => {\n    dispatch({ type: LOGGED_OUT });\n  };\n};\n\n// CLEAR ERRORS\nexport const clearErrors = () => {\n  return dispatch => {\n    dispatch({ type: CLEAR_ERRORS });\n  };\n};\n\n// SET LOADING\nexport const setLoading = () => {\n  return { type: SET_LOADING };\n};\n"]},"metadata":{},"sourceType":"module"}