{"ast":null,"code":"import setAuthToken from \"../utils/setAuthToken\";\nimport { REGISTER_SUCCESS, REGISTER_FAIL, USER_LOADED, AUTH_ERROR, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT, SET_LOADING, CLEAR_ERRORS } from \"./types\"; // LOAD USER\n\nexport const loadUser = async dispatch => {\n  if (localStorage.token) {\n    setAuthToken(localStorage.token);\n  }\n\n  try {\n    setLoading();\n    const res = await fetch(\"http://localhost:5000/api/auth\");\n    const data = await res.json();\n    dispatch({\n      type: USER_LOADED,\n      payload: data\n    });\n  } catch (err) {\n    dispatch({\n      type: AUTH_ERROR\n    });\n  }\n}; // REGISTER USER\n\nexport const register = formData => async dispatch => {\n  try {\n    setLoading();\n    const res = await fetch(\"http://localhost:5000/api/users\", {\n      method: \"POST\",\n      body: JSON.stringify(formData),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const data = await res.json();\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: data\n    });\n    loadUser();\n  } catch (err) {\n    dispatch({\n      type: REGISTER_FAIL,\n      payload: err.response.statusText\n    });\n  }\n}; // LOGIN USER\n\nexport const login = formData => async dispatch => {\n  try {\n    setLoading();\n    const res = await fetch(\"http://localhost:5000/api/auth\", {\n      method: \"POST\",\n      body: JSON.stringify(formData),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const data = await res.json();\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: data\n    });\n    loadUser();\n  } catch (err) {\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: err.response.statusText\n    });\n  }\n}; // LOGOUT USER\n\nexport const logout = dispatch => dispatch({\n  type: LOGOUT\n}); // CLEAR ERRORS\n\nexport const clearErrors = dispatch => dispatch({\n  type: CLEAR_ERRORS\n}); // SET LOADING\n\nexport const setLoading = dispatch => dispatch({\n  type: SET_LOADING\n});","map":{"version":3,"sources":["/Users/AndrewSabato/Desktop/Pikcha/Repo/PikchaWebApp/ClientApp/src/actions/auth.js"],"names":["setAuthToken","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","SET_LOADING","CLEAR_ERRORS","loadUser","dispatch","localStorage","token","setLoading","res","fetch","data","json","type","payload","err","register","formData","method","body","JSON","stringify","headers","response","statusText","login","logout","clearErrors"],"mappings":"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","sourcesContent":["import setAuthToken from \"../utils/setAuthToken\";\n\nimport {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  USER_LOADED,\n  AUTH_ERROR,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n  SET_LOADING,\n  CLEAR_ERRORS\n} from \"./types\";\n\n// LOAD USER\nexport const loadUser = async dispatch => {\n  if (localStorage.token) {\n    setAuthToken(localStorage.token);\n  }\n\n  try {\n    setLoading();\n    const res = await fetch(\"http://localhost:5000/api/auth\");\n    const data = await res.json();\n\n    dispatch({\n      type: USER_LOADED,\n      payload: data\n    });\n  } catch (err) {\n    dispatch({ type: AUTH_ERROR });\n  }\n};\n\n// REGISTER USER\nexport const register = formData => async dispatch => {\n  try {\n    setLoading();\n    const res = await fetch(\"http://localhost:5000/api/users\", {\n      method: \"POST\",\n      body: JSON.stringify(formData),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const data = await res.json();\n\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: data\n    });\n    loadUser();\n  } catch (err) {\n    dispatch({\n      type: REGISTER_FAIL,\n      payload: err.response.statusText\n    });\n  }\n};\n\n// LOGIN USER\nexport const login = formData => async dispatch => {\n  try {\n    setLoading();\n    const res = await fetch(\"http://localhost:5000/api/auth\", {\n      method: \"POST\",\n      body: JSON.stringify(formData),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const data = await res.json();\n\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: data\n    });\n    loadUser();\n  } catch (err) {\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: err.response.statusText\n    });\n  }\n};\n\n// LOGOUT USER\nexport const logout = dispatch => dispatch({ type: LOGOUT });\n\n// CLEAR ERRORS\nexport const clearErrors = dispatch => dispatch({ type: CLEAR_ERRORS });\n\n// SET LOADING\nexport const setLoading = dispatch => dispatch({ type: SET_LOADING });\n"]},"metadata":{},"sourceType":"module"}